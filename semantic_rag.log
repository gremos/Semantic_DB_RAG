2025-08-13 18:11:45,060 - interactive.query_interface - INFO - Initializing Semantic RAG System...
2025-08-13 18:11:45,178 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-08-13 18:11:45,178 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-13 18:11:51,511 - interactive.query_interface - INFO - Schema embedding model loaded
2025-08-13 18:11:52,728 - interactive.query_interface - INFO - Loaded 916 tables from semantic analysis
2025-08-13 18:11:52,765 - interactive.query_interface - INFO - Building enhanced schema structures...
2025-08-13 18:11:52,769 - interactive.query_interface - INFO - Building schema graph for 916 tables
2025-08-13 18:11:52,779 - interactive.query_interface - INFO - Schema graph built with 4269 relationships
2025-08-13 18:12:03,462 - interactive.query_interface - INFO - Initialized embeddings for 916 tables
2025-08-13 18:12:03,462 - interactive.query_interface - INFO - Semantic RAG System initialized in 18.4s
2025-08-13 18:30:23,351 - interactive.query_interface - INFO - Selected 8 tables from 79 candidates
2025-08-13 18:30:24,266 - httpx - INFO - HTTP Request: POST https://gremo-me2osvmj-swedencentral.openai.azure.com/openai/deployments/gpt-5-mini/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 400 Bad Request"
2025-08-13 18:30:24,271 - interactive.query_interface - ERROR - SQL generation error (attempt 1): Error code: 400 - {'error': {'message': "Unsupported value: 'temperature' does not support 0.1 with this model. Only the default (1) value is supported.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': 'unsupported_value'}}
2025-08-13 18:30:24,404 - httpx - INFO - HTTP Request: POST https://gremo-me2osvmj-swedencentral.openai.azure.com/openai/deployments/gpt-5-mini/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 400 Bad Request"
2025-08-13 18:30:24,405 - interactive.query_interface - ERROR - SQL generation error (attempt 2): Error code: 400 - {'error': {'message': "Unsupported value: 'temperature' does not support 0.1 with this model. Only the default (1) value is supported.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': 'unsupported_value'}}
2025-08-13 18:30:24,531 - httpx - INFO - HTTP Request: POST https://gremo-me2osvmj-swedencentral.openai.azure.com/openai/deployments/gpt-5-mini/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 400 Bad Request"
2025-08-13 18:30:24,532 - interactive.query_interface - ERROR - SQL generation error (attempt 3): Error code: 400 - {'error': {'message': "Unsupported value: 'temperature' does not support 0.1 with this model. Only the default (1) value is supported.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': 'unsupported_value'}}
2025-08-13 18:31:20,811 - interactive.query_interface - INFO - Selected 8 tables from 79 candidates
2025-08-13 18:31:21,473 - httpx - INFO - HTTP Request: POST https://gremo-me2osvmj-swedencentral.openai.azure.com/openai/deployments/gpt-5-mini/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 400 Bad Request"
2025-08-13 18:31:21,481 - interactive.query_interface - ERROR - SQL generation error (attempt 1): Error code: 400 - {'error': {'message': "Unsupported value: 'temperature' does not support 0.1 with this model. Only the default (1) value is supported.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': 'unsupported_value'}}
2025-08-13 18:31:21,626 - httpx - INFO - HTTP Request: POST https://gremo-me2osvmj-swedencentral.openai.azure.com/openai/deployments/gpt-5-mini/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 400 Bad Request"
2025-08-13 18:31:21,627 - interactive.query_interface - ERROR - SQL generation error (attempt 2): Error code: 400 - {'error': {'message': "Unsupported value: 'temperature' does not support 0.1 with this model. Only the default (1) value is supported.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': 'unsupported_value'}}
2025-08-13 18:31:21,769 - httpx - INFO - HTTP Request: POST https://gremo-me2osvmj-swedencentral.openai.azure.com/openai/deployments/gpt-5-mini/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 400 Bad Request"
2025-08-13 18:31:21,773 - interactive.query_interface - ERROR - SQL generation error (attempt 3): Error code: 400 - {'error': {'message': "Unsupported value: 'temperature' does not support 0.1 with this model. Only the default (1) value is supported.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': 'unsupported_value'}}
2025-08-13 18:32:49,944 - interactive.query_interface - INFO - Initializing Semantic RAG System...
2025-08-13 18:32:50,035 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-08-13 18:32:50,035 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-13 18:32:53,321 - interactive.query_interface - INFO - Schema embedding model loaded
2025-08-13 18:32:54,466 - interactive.query_interface - INFO - Loaded 916 tables from semantic analysis
2025-08-13 18:32:54,503 - interactive.query_interface - INFO - Building enhanced schema structures...
2025-08-13 18:32:54,503 - interactive.query_interface - INFO - Building schema graph for 916 tables
2025-08-13 18:32:54,513 - interactive.query_interface - INFO - Schema graph built with 4269 relationships
2025-08-13 18:33:05,877 - interactive.query_interface - INFO - Initialized embeddings for 916 tables
2025-08-13 18:33:05,877 - interactive.query_interface - INFO - Semantic RAG System initialized in 15.9s
2025-08-13 18:33:26,547 - interactive.query_interface - INFO - Selected 8 tables from 69 candidates
2025-08-13 18:33:52,462 - httpx - INFO - HTTP Request: POST https://gremo-me2osvmj-swedencentral.openai.azure.com/openai/deployments/gpt-5-mini/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
2025-08-13 18:33:52,761 - interactive.query_interface - ERROR - Database connection error: 'pyodbc.Cursor' object has no attribute 'timeout' and no __dict__ for setting new attributes
2025-08-13 18:33:52,761 - interactive.query_interface - ERROR - System error during query execution: 'pyodbc.Cursor' object has no attribute 'timeout' and no __dict__ for setting new attributes
2025-08-13 18:47:23,134 - interactive.query_interface - INFO - Selected 8 tables from 31 candidates
2025-08-13 18:49:26,674 - interactive.query_interface - INFO - Initializing Enhanced Semantic RAG System...
2025-08-13 18:49:26,767 - interactive.query_interface - INFO - Enhanced SQL generator initialized with templates
2025-08-13 18:49:26,774 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-08-13 18:49:26,775 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-13 18:49:28,990 - interactive.query_interface - INFO - Schema embedding model loaded
2025-08-13 18:49:30,256 - interactive.query_interface - INFO - Loaded 916 tables from semantic analysis
2025-08-13 18:49:30,299 - interactive.query_interface - INFO - Building enhanced schema structures...
2025-08-13 18:49:30,300 - interactive.query_interface - INFO - Building schema graph for 916 tables
2025-08-13 18:49:30,310 - interactive.query_interface - INFO - Schema graph built with 4269 relationships
2025-08-13 18:49:42,386 - interactive.query_interface - INFO - Initialized embeddings for 916 tables
2025-08-13 18:49:42,387 - interactive.query_interface - INFO - Enhanced Semantic RAG System initialized in 15.7s
2025-08-13 18:52:16,399 - interactive.query_interface - INFO - Selected 8 tables from 252 candidates
2025-08-13 18:52:16,401 - interactive.query_interface - ERROR - Template parameter missing: 'customer_column'
2025-08-13 18:52:16,401 - interactive.query_interface - INFO - Falling back to LLM generation
2025-08-13 18:52:17,173 - httpx - INFO - HTTP Request: POST https://gremo-me2osvmj-swedencentral.openai.azure.com/openai/deployments/gpt-5-mini/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 400 Bad Request"
2025-08-13 18:52:17,175 - interactive.query_interface - ERROR - Direct LLM generation error: Error code: 400 - {'error': {'message': "Unsupported value: 'temperature' does not support 0.1 with this model. Only the default (1) value is supported.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': 'unsupported_value'}}
2025-08-13 18:52:17,308 - httpx - INFO - HTTP Request: POST https://gremo-me2osvmj-swedencentral.openai.azure.com/openai/deployments/gpt-5-mini/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 400 Bad Request"
2025-08-13 18:52:17,309 - interactive.query_interface - ERROR - Direct LLM generation error: Error code: 400 - {'error': {'message': "Unsupported value: 'temperature' does not support 0.1 with this model. Only the default (1) value is supported.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': 'unsupported_value'}}
2025-08-13 18:52:17,437 - httpx - INFO - HTTP Request: POST https://gremo-me2osvmj-swedencentral.openai.azure.com/openai/deployments/gpt-5-mini/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 400 Bad Request"
2025-08-13 18:52:17,438 - interactive.query_interface - ERROR - Direct LLM generation error: Error code: 400 - {'error': {'message': "Unsupported value: 'temperature' does not support 0.1 with this model. Only the default (1) value is supported.", 'type': 'invalid_request_error', 'param': 'temperature', 'code': 'unsupported_value'}}
2025-08-13 18:53:53,428 - interactive.query_interface - INFO - Initializing Enhanced Semantic RAG System...
2025-08-13 18:53:53,517 - interactive.query_interface - INFO - Enhanced SQL generator initialized with templates
2025-08-13 18:53:53,523 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-08-13 18:53:53,523 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-13 18:53:55,669 - interactive.query_interface - INFO - Schema embedding model loaded
2025-08-13 18:53:56,949 - interactive.query_interface - INFO - Loaded 916 tables from semantic analysis
2025-08-13 18:53:56,991 - interactive.query_interface - INFO - Building enhanced schema structures...
2025-08-13 18:53:56,991 - interactive.query_interface - INFO - Building schema graph for 916 tables
2025-08-13 18:53:57,003 - interactive.query_interface - INFO - Schema graph built with 4269 relationships
2025-08-13 18:54:07,944 - interactive.query_interface - INFO - Initialized embeddings for 916 tables
2025-08-13 18:54:07,944 - interactive.query_interface - INFO - Enhanced Semantic RAG System initialized in 14.5s
2025-08-13 18:54:35,527 - interactive.query_interface - INFO - Selected 8 tables from 182 candidates
2025-08-13 18:54:35,530 - interactive.query_interface - ERROR - Template parameter missing: 'customer_column'
2025-08-13 18:54:35,531 - interactive.query_interface - INFO - Falling back to LLM generation
2025-08-13 18:55:05,976 - httpx - INFO - HTTP Request: POST https://gremo-me2osvmj-swedencentral.openai.azure.com/openai/deployments/gpt-5-mini/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
2025-08-13 18:55:05,983 - interactive.query_interface - INFO - LLM generation successful on attempt 1
2025-08-13 18:55:06,142 - interactive.query_interface - ERROR - Database connection error: 'pyodbc.Cursor' object has no attribute 'timeout' and no __dict__ for setting new attributes
2025-08-13 18:55:06,143 - interactive.query_interface - ERROR - System error during query execution: 'pyodbc.Cursor' object has no attribute 'timeout' and no __dict__ for setting new attributes
2025-08-13 19:00:20,196 - interactive.query_interface - INFO - Initializing Enhanced Semantic RAG System...
2025-08-13 19:00:20,284 - interactive.query_interface - INFO - Enhanced SQL generator initialized with templates
2025-08-13 19:00:20,292 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-08-13 19:00:20,293 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-13 19:00:22,516 - interactive.query_interface - INFO - Schema embedding model loaded
2025-08-13 19:00:23,714 - interactive.query_interface - INFO - Loaded 916 tables from semantic analysis
2025-08-13 19:00:23,755 - interactive.query_interface - INFO - Building enhanced schema structures...
2025-08-13 19:00:23,756 - interactive.query_interface - INFO - Building schema graph for 916 tables
2025-08-13 19:00:23,765 - interactive.query_interface - INFO - Schema graph built with 4269 relationships
2025-08-13 19:00:34,981 - interactive.query_interface - INFO - Initialized embeddings for 916 tables
2025-08-13 19:00:34,982 - interactive.query_interface - INFO - Enhanced Semantic RAG System initialized in 14.8s
2025-08-13 19:00:54,639 - interactive.query_interface - INFO - Selected 8 tables from 43 candidates
2025-08-13 19:00:54,641 - interactive.query_interface - INFO - Built context for 8 tables
2025-08-13 19:00:54,642 - interactive.query_interface - INFO - Business columns found: ['customer', 'amount', 'date', 'complaint', 'content', 'id']
2025-08-13 19:00:54,642 - interactive.query_interface - INFO - Detected intent: customer_count
2025-08-13 19:00:54,643 - interactive.query_interface - INFO - Extracted parameters: {'limit': 1000, 'conditions': 'TargetValue > 0', 'date_filter': 'YEAR(StartDate) = 2025', 'order_column': 'StartDate', 'table': '[dbo].[TargetGroupItemValue]', 'columns': 'UserTargetValue, HandlerUserID, TargetValue, ChannelTargetValue, StartDate, EndDate, VoiceCaseID, RequiresDeliveryOfContent, ID, TargetGroupItemID', 'customer_column': 'UserTargetValue', 'customer_columns': 'UserTargetValue, HandlerUserID, TargetUserID', 'amount_column': 'TargetValue', 'date_column': 'StartDate', 'complaint_columns': 'VoiceCaseID', 'complaint_conditions': 'VoiceCaseID IS NOT NULL'}
2025-08-13 19:00:54,644 - interactive.query_interface - INFO - Generated SQL from template: SELECT COUNT(DISTINCT UserTargetValue) as total_customers FROM [dbo].[TargetGroupItemValue] WHERE TargetValue > 0
2025-08-13 19:00:54,645 - interactive.query_interface - INFO - Template generation successful: customer_count
2025-08-13 19:00:54,799 - interactive.query_interface - INFO - Executing SQL: SELECT
  COUNT(DISTINCT [targetgroupitemvalue].[usertargetvalue]) AS [total_customers]
FROM [dbo].[T...
2025-08-13 19:00:58,414 - interactive.query_interface - INFO - Query executed successfully: 1 rows in 3.7s
2025-08-13 19:01:19,424 - interactive.query_interface - INFO - Selected 8 tables from 188 candidates
2025-08-13 19:01:19,426 - interactive.query_interface - INFO - Built context for 8 tables
2025-08-13 19:01:19,426 - interactive.query_interface - INFO - Business columns found: ['customer', 'amount', 'date', 'complaint', 'content', 'id']
2025-08-13 19:01:19,427 - interactive.query_interface - INFO - Detected intent: customer_list
2025-08-13 19:01:19,428 - interactive.query_interface - INFO - Extracted parameters: {'limit': 1000, 'conditions': '1=1', 'date_filter': 'YEAR(StartDate) = 2025', 'order_column': 'StartDate', 'table': '[dbo].[TargetGroupItemValue]', 'columns': 'UserTargetValue, HandlerUserID, TargetValue, ChannelTargetValue, StartDate, EndDate, VoiceCaseID, RequiresDeliveryOfContent, ID, TargetGroupItemID', 'customer_column': 'UserTargetValue', 'customer_columns': 'UserTargetValue, HandlerUserID, TargetUserID', 'amount_column': 'TargetValue', 'date_column': 'StartDate', 'complaint_columns': 'VoiceCaseID', 'complaint_conditions': 'VoiceCaseID IS NOT NULL'}
2025-08-13 19:01:19,428 - interactive.query_interface - INFO - Generated SQL from template: SELECT TOP 1000 UserTargetValue, HandlerUserID, TargetUserID FROM [dbo].[TargetGroupItemValue] WHERE 1=1 ORDER BY StartDate DESC
2025-08-13 19:01:19,429 - interactive.query_interface - INFO - Template generation successful: customer_list
2025-08-13 19:01:19,455 - interactive.query_interface - INFO - Executing SQL: SELECT
TOP 1000
  [targetgroupitemvalue].[usertargetvalue] AS [usertargetvalue],
  [targetgroupitemv...
2025-08-13 19:01:19,481 - interactive.query_interface - INFO - Query executed successfully: 1000 rows in 0.0s
2025-08-13 19:01:51,415 - interactive.query_interface - INFO - Selected 8 tables from 187 candidates
2025-08-13 19:01:51,418 - interactive.query_interface - INFO - Built context for 8 tables
2025-08-13 19:01:51,418 - interactive.query_interface - INFO - Business columns found: ['customer', 'amount', 'date', 'complaint', 'content', 'id']
2025-08-13 19:01:51,419 - interactive.query_interface - INFO - Detected intent: complaint_analysis
2025-08-13 19:01:51,419 - interactive.query_interface - INFO - Extracted parameters: {'limit': 5, 'conditions': '1=1', 'date_filter': 'YEAR(StartDate) = 2025', 'order_column': 'StartDate', 'table': '[dbo].[TargetGroupItemValue]', 'columns': 'UserTargetValue, HandlerUserID, TargetValue, ChannelTargetValue, StartDate, EndDate, VoiceCaseID, RequiresDeliveryOfContent, ID, TargetGroupItemID', 'customer_column': 'UserTargetValue', 'customer_columns': 'UserTargetValue, HandlerUserID, TargetUserID', 'amount_column': 'TargetValue', 'date_column': 'StartDate', 'complaint_columns': 'VoiceCaseID', 'complaint_conditions': 'VoiceCaseID IS NOT NULL'}
2025-08-13 19:01:51,420 - interactive.query_interface - INFO - Generated SQL from template: SELECT TOP 5 UserTargetValue, HandlerUserID, TargetUserID, VoiceCaseID, StartDate FROM [dbo].[TargetGroupItemValue] WHERE VoiceCaseID IS NOT NULL ORDER BY StartDate DESC
2025-08-13 19:01:51,420 - interactive.query_interface - INFO - Template generation successful: complaint_analysis
2025-08-13 19:01:51,455 - interactive.query_interface - INFO - Executing SQL: SELECT
TOP 5
  [targetgroupitemvalue].[usertargetvalue] AS [usertargetvalue],
  [targetgroupitemvalu...
2025-08-13 19:01:51,711 - interactive.query_interface - INFO - Query executed successfully: 5 rows in 0.3s
2025-08-13 19:04:48,427 - interactive.query_interface - INFO - Selected 8 tables from 131 candidates
2025-08-13 19:04:48,430 - interactive.query_interface - INFO - Built context for 8 tables
2025-08-13 19:04:48,430 - interactive.query_interface - INFO - Business columns found: ['customer', 'amount', 'date', 'complaint', 'content', 'id']
2025-08-13 19:04:48,431 - interactive.query_interface - INFO - Detected intent: customer_count
2025-08-13 19:04:48,432 - interactive.query_interface - INFO - Extracted parameters: {'limit': 1000, 'conditions': 'TargetValue > 0', 'date_filter': '1=1', 'order_column': 'CreatedOn', 'table': '[dbo].[Case]', 'columns': 'OwnerUser, CustomerIndicatorId, TargetValue, ChannelTargetValue, CreatedOn, CreatedBy, CaseTypeID, MasterCaseID, ContextEntityID, ContextEntityType', 'customer_column': 'OwnerUser', 'customer_columns': 'OwnerUser, CustomerIndicatorId', 'amount_column': 'TargetValue', 'date_column': 'CreatedOn', 'complaint_columns': 'CaseTypeID, MasterCaseID', 'complaint_conditions': 'CaseTypeID IS NOT NULL'}
2025-08-13 19:04:48,432 - interactive.query_interface - INFO - Generated SQL from template: SELECT COUNT(DISTINCT OwnerUser) as total_customers FROM [dbo].[Case] WHERE TargetValue > 0
2025-08-13 19:04:48,433 - interactive.query_interface - INFO - Template generation successful: customer_count
2025-08-13 19:04:48,465 - interactive.query_interface - INFO - Executing SQL: SELECT
  COUNT(DISTINCT [case].[owneruser]) AS [total_customers]
FROM [dbo].[Case] AS [case]
WHERE
 ...
2025-08-13 19:04:48,469 - interactive.query_interface - ERROR - Database connection error: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'targetvalue'. (207) (SQLExecDirectW)")
2025-08-13 19:12:08,752 - interactive.query_interface - INFO - Initializing Enhanced Semantic RAG System...
2025-08-13 19:12:08,832 - interactive.query_interface - INFO - Enhanced SQL generator initialized with templates
2025-08-13 19:15:11,938 - interactive.query_interface - INFO - Initializing Enhanced Semantic RAG System...
2025-08-13 19:15:12,031 - interactive.query_interface - INFO - Enhanced SQL generator initialized with templates
2025-08-14 09:32:29,304 - interactive.query_interface - INFO - Initializing Enhanced Semantic RAG System...
2025-08-14 09:32:29,391 - interactive.query_interface - INFO - Enhanced SQL generator initialized with templates
2025-08-14 09:35:56,365 - interactive.query_interface - INFO - Initializing Enhanced Semantic RAG System...
2025-08-14 09:35:56,454 - interactive.query_interface - INFO - Enhanced SQL generator initialized with templates
2025-08-14 09:37:37,743 - interactive.query_interface - INFO - Initializing Enhanced Semantic RAG System...
2025-08-14 09:37:37,833 - interactive.query_interface - INFO - Enhanced SQL generator initialized with templates
2025-08-14 09:41:58,619 - interactive.query_interface - INFO - Initializing Enhanced Semantic RAG System...
2025-08-14 09:41:58,708 - interactive.query_interface - INFO - Enhanced SQL generator initialized with templates
2025-08-14 09:41:58,716 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-08-14 09:41:58,717 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-14 09:42:00,889 - interactive.query_interface - INFO - Schema embedding model loaded
2025-08-14 09:42:02,078 - interactive.query_interface - INFO - Loaded 916 tables from semantic analysis
2025-08-14 09:42:02,120 - interactive.query_interface - INFO - Building enhanced schema structures...
2025-08-14 09:42:02,121 - interactive.query_interface - INFO - Building schema graph for 916 tables
2025-08-14 09:42:02,131 - interactive.query_interface - INFO - Schema graph built with 4269 relationships
2025-08-14 09:42:13,499 - interactive.query_interface - INFO - Initialized embeddings for 916 tables
2025-08-14 09:59:32,524 - interactive.query_interface - INFO - Initializing Enhanced Semantic RAG System...
2025-08-14 09:59:32,611 - interactive.query_interface - INFO - Enhanced SQL generator initialized with templates
2025-08-14 10:10:46,469 - interactive.query_interface - INFO - Initializing Enhanced Semantic RAG System...
2025-08-14 10:10:46,563 - interactive.query_interface - INFO - Enhanced SQL generator initialized with templates
