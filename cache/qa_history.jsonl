{"timestamp": "2025-12-31T16:51:57.997496", "question": "Show contracts by campaign", "status": "ok", "confidence": 0.95, "sql_statement": "SELECT TOP(100) [CampaignID], COUNT(*) AS ContractCount, SUM([Y01PBDContractsValue]) AS Y01PrintContractsValue, SUM([Y02PBDContractsValue]) AS Y02PrintContractsValue, SUM([Y01IBDContractsValue]) AS Y01InternetContractsValue, SUM([Y02IBDContractsValue]) AS Y02InternetContractsValue FROM ViewTargetGroupItemInfo WITH (NOLOCK) WHERE [CampaignID] IS NOT NULL GROUP BY [CampaignID] ORDER BY [CampaignID]", "row_count": 100, "execution_time_ms": 36973.438, "total_time_ms": 44933.206, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T16:55:30.079337", "question": "Show contracts by campaign", "status": "ok", "confidence": 0.95, "sql_statement": "SELECT TOP(100) [CampaignID], COUNT(*) AS ContractCount, SUM([Y01PBDContractsValue]) AS Y01PrintContractsValue, SUM([Y02PBDContractsValue]) AS Y02PrintContractsValue, SUM([Y01IBDContractsValue]) AS Y01InternetContractsValue, SUM([Y02IBDContractsValue]) AS Y02InternetContractsValue FROM ViewTargetGroupItemInfo WITH (NOLOCK) WHERE [CampaignID] IS NOT NULL GROUP BY [CampaignID] ORDER BY [CampaignID]", "row_count": 100, "execution_time_ms": 28883.792, "total_time_ms": 36990.271, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T16:57:46.950430", "question": "Show top 5 customers by total revenue", "status": "ok", "confidence": 0.95, "sql_statement": "SELECT TOP(5) CSMI.BusinessPointCode, CSMI.BusinessPointName, SUM(CSMI.FinalPrice) AS TotalRevenue FROM CampaignSalesMarketItem AS CSMI JOIN TargetGroupItemValue AS TGIV ON CSMI.TargetGroupItemValueID = TGIV.ID JOIN [Case] AS C ON TGIV.ID = C.ContextEntityID AND C.ContextEntityType = 'TGIV' JOIN Task AS T ON C.ID = T.CaseID GROUP BY CSMI.BusinessPointCode, CSMI.BusinessPointName ORDER BY TotalRevenue DESC", "row_count": 0, "execution_time_ms": 153.302, "total_time_ms": 7792.463, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T17:01:47.624515", "question": "Show contracts this month", "status": "ok", "confidence": 0.95, "sql_statement": "SELECT TOP(100) tgi.ID, [BusinessPointID], [CampaignID], [SourceCampaignID], [CaseID], [CustomerName], [Brandname], [Prefecture], [Municipality], [City], [StreetName], [StreetNumber], [NumberExtension], [ZipCode], [Phone], [CustomerProfession], [ReliabilityStatus], [MainHeadingID], [MainHeadingCode], [MainHeadingName], tgiv.LastSignedDate FROM dbo.[TargetGroupItem] tgi WITH (nolock) JOIN dbo.[TargetGroupItemValue] tgiv WITH (nolock) ON tgi.ID = tgiv.TargetGroupItemID LEFT JOIN dbo.[TargetGroupItemInfo] tgii WITH (nolock) ON tgiv.ID = tgii.TargetGroupItemValueID WHERE tgiv.LastSignedDate >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) ORDER BY tgiv.LastSignedDate DESC", "row_count": 0, "execution_time_ms": 7388.439, "total_time_ms": 16393.864, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T17:27:22.129209", "question": "Show contracts by campaign", "status": "error", "confidence": 0, "sql_statement": "", "row_count": 0, "execution_time_ms": 0, "total_time_ms": 0, "error": "base_url and resource are mutually exclusive", "refusal_reason": null}
{"timestamp": "2025-12-31T18:23:33.016113", "question": "Show contracts this month", "status": "ok", "confidence": 0.95, "sql_statement": "SELECT TOP(100) tgi.ID, [BusinessPointID], [CampaignID], [SourceCampaignID], [CaseID], [CustomerName], [Brandname], [Prefecture], [Municipality], [City], [StreetName], [StreetNumber], [NumberExtension], [ZipCode], [Phone], [CustomerProfession], [ReliabilityStatus], [MainHeadingID], [MainHeadingCode], [MainHeadingName], tgiv.LastSignedDate FROM dbo.[TargetGroupItem] tgi WITH (nolock) JOIN dbo.[TargetGroupItemValue] tgiv WITH (nolock) ON tgi.ID = tgiv.TargetGroupItemID LEFT JOIN dbo.[TargetGroupItemInfo] tgii WITH (nolock) ON tgiv.ID = tgii.TargetGroupItemValueID WHERE tgiv.LastSignedDate >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) ORDER BY tgiv.LastSignedDate DESC", "row_count": 0, "execution_time_ms": 1478.47, "total_time_ms": 11334.352, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T18:24:50.128234", "question": "Show contracts this month", "status": "error", "confidence": 0.95, "sql_statement": "SELECT TOP(100) t.\u039a\u03b1\u03bc\u03c0\u03ac\u03bd\u03b9\u03b1, case t.LossPrintedNew when 0 then '\u039d\u03ad\u03bf\u03c2' when 1 then '\u03a0\u03c1\u03bf\u03c4\u03c5\u03c0\u03c9\u03bc\u03ad\u03bd\u03bf\u03c2' when 2 then '\u0391\u03c0\u03ce\u03bb\u03b5\u03b9\u03b1' end [\u039a\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b1 \u03a0\u03b5\u03bb\u03ac\u03c4\u03b7], t.[\u039a\u03c9\u03b4. \u03a0\u03b5\u03bb\u03ac\u03c4\u03b7], t.\u0395\u03c0\u03c9\u03bd\u03c5\u03bc\u03af\u03b1, t.[\u039a\u03c9\u03b4. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5], t.\u0391\u03be\u03af\u03b1, t.[\u0395\u03ba\u03c0\u03c4\u03c9\u03c3\u03b7 \u03a4\u03c1\u03cc\u03c0\u03bf\u03c5 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2], CASE WHEN t.[\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1] <> t.[\u0391\u03be\u03af\u03b1] THEN t.[\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1] ELSE NULL END [\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1], t.[\u03a0\u03b5\u03c1\u03b9\u03ad\u03c7\u03b5\u03b9 \u03a3\u03c5\u03bd\u03b4\u03c1\u03bf\u03bc\u03b7\u03c4\u03b9\u03ba\u03ae \u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae], t.[\u03a0\u03b5\u03c1\u03b9\u03ad\u03c7\u03b5\u03b9 \u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u03a0\u03c1\u03bf\u03c2 \u0391\u03bd\u03b1\u03bd\u03ad\u03c9\u03c3\u03b7], t.\u03a0\u03c9\u03bb\u03b7\u03c4\u03ae\u03c2, t.[\u0397\u03bc. \u03a5\u03c0\u03bf\u03b3\u03c1\u03b1\u03c6\u03ae\u03c2], t.[\u0397\u03bc. \u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1\u03c2], t.[State ( \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5 )] FROM ITApps.[dbo].[vwContractsPerCampaign] t LEFT JOIN yps.dbo.TargetGroupItemValue tgiv ON ISNULL(tgiv.ContractID, tgiv.AltOfferID) = t.[\u039a\u03c9\u03b4. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5] WHERE t.[\u0397\u03bc. \u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1\u03c2] >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) ORDER BY t.[\u0397\u03bc. \u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1\u03c2] DESC", "row_count": 0, "execution_time_ms": 92.46600000000001, "total_time_ms": 15586.425000000001, "error": "(pyodbc.ProgrammingError) ('42S02', \"[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'YPS.dbo.Contract'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not use view or function 'ITApps.dbo.vwContractsPerCampaign' because of binding errors. (4413)\")\n[SQL: SELECT TOP(100) t.\u039a\u03b1\u03bc\u03c0\u03ac\u03bd\u03b9\u03b1, case t.LossPrintedNew when 0 then '\u039d\u03ad\u03bf\u03c2' when 1 then '\u03a0\u03c1\u03bf\u03c4\u03c5\u03c0\u03c9\u03bc\u03ad\u03bd\u03bf\u03c2' when 2 then '\u0391\u03c0\u03ce\u03bb\u03b5\u03b9\u03b1' end [\u039a\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b1 \u03a0\u03b5\u03bb\u03ac\u03c4\u03b7], t.[\u039a\u03c9\u03b4. \u03a0\u03b5\u03bb\u03ac\u03c4\u03b7], t.\u0395\u03c0\u03c9\u03bd\u03c5\u03bc\u03af\u03b1, t.[\u039a\u03c9\u03b4. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5], t.\u0391\u03be\u03af\u03b1, t.[\u0395\u03ba\u03c0\u03c4\u03c9\u03c3\u03b7 \u03a4\u03c1\u03cc\u03c0\u03bf\u03c5 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2], CASE WHEN t.[\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1] <> t.[\u0391\u03be\u03af\u03b1] THEN t.[\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1] ELSE NULL END [\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1], t.[\u03a0\u03b5\u03c1\u03b9\u03ad\u03c7\u03b5\u03b9 \u03a3\u03c5\u03bd\u03b4\u03c1\u03bf\u03bc\u03b7\u03c4\u03b9\u03ba\u03ae \u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae], t.[\u03a0\u03b5\u03c1\u03b9\u03ad\u03c7\u03b5\u03b9 \u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u03a0\u03c1\u03bf\u03c2 \u0391\u03bd\u03b1\u03bd\u03ad\u03c9\u03c3\u03b7], t.\u03a0\u03c9\u03bb\u03b7\u03c4\u03ae\u03c2, t.[\u0397\u03bc. \u03a5\u03c0\u03bf\u03b3\u03c1\u03b1\u03c6\u03ae\u03c2], t.[\u0397\u03bc. \u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1\u03c2], t.[State ( \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5 )] FROM ITApps.[dbo].[vwContractsPerCampaign] t LEFT JOIN yps.dbo.TargetGroupItemValue tgiv ON ISNULL(tgiv.ContractID, tgiv.AltOfferID) = t.[\u039a\u03c9\u03b4. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5] WHERE t.[\u0397\u03bc. \u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1\u03c2] >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) ORDER BY t.[\u0397\u03bc. \u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1\u03c2] DESC]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "refusal_reason": null}
{"timestamp": "2025-12-31T18:26:38.633537", "question": "List recent contracts", "status": "error", "confidence": 0.95, "sql_statement": "SELECT TOP(100) tmp.[\u039a\u03b1\u03bc\u03c0\u03ac\u03bd\u03b9\u03b1], tmp.[\u039a\u03c9\u03b4. \u03a0\u03b5\u03bb\u03ac\u03c4\u03b7], tmp.[\u0395\u03c0\u03c9\u03bd\u03c5\u03bc\u03af\u03b1], tmp.[\u039a\u03c9\u03b4. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5], tmp.[\u0391\u03be\u03af\u03b1], tmp.[\u0395\u03ba\u03c0\u03c4\u03c9\u03c3\u03b7 \u03a4\u03c1\u03cc\u03c0\u03bf\u03c5 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2], CASE WHEN tmp.[\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1] <> tmp.[\u0391\u03be\u03af\u03b1] THEN tmp.[\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1] ELSE NULL END AS [\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1], tmp.[\u03a0\u03b5\u03c1\u03b9\u03ad\u03c7\u03b5\u03b9 \u03a3\u03c5\u03bd\u03b4\u03c1\u03bf\u03bc\u03b7\u03c4\u03b9\u03ba\u03ae \u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae], tmp.[\u03a0\u03b5\u03c1\u03b9\u03ad\u03c7\u03b5\u03b9 \u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u03a0\u03c1\u03bf\u03c2 \u0391\u03bd\u03b1\u03bd\u03ad\u03c9\u03c3\u03b7], tmp.[\u03a0\u03c9\u03bb\u03b7\u03c4\u03ae\u03c2], tmp.[\u0397\u03bc. \u03a5\u03c0\u03bf\u03b3\u03c1\u03b1\u03c6\u03ae\u03c2], tmp.[\u0397\u03bc. \u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1\u03c2], tmp.[State ( \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5 )] FROM ITApps.[dbo].[vwContractsPerCampaign] tmp ORDER BY tmp.[\u0397\u03bc. \u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1\u03c2] DESC", "row_count": 0, "execution_time_ms": 88.774, "total_time_ms": 9097.228, "error": "(pyodbc.ProgrammingError) ('42S02', \"[42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid object name 'YPS.dbo.Contract'. (208) (SQLExecDirectW); [42S02] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Could not use view or function 'ITApps.dbo.vwContractsPerCampaign' because of binding errors. (4413)\")\n[SQL: SELECT TOP(100) tmp.[\u039a\u03b1\u03bc\u03c0\u03ac\u03bd\u03b9\u03b1], tmp.[\u039a\u03c9\u03b4. \u03a0\u03b5\u03bb\u03ac\u03c4\u03b7], tmp.[\u0395\u03c0\u03c9\u03bd\u03c5\u03bc\u03af\u03b1], tmp.[\u039a\u03c9\u03b4. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5], tmp.[\u0391\u03be\u03af\u03b1], tmp.[\u0395\u03ba\u03c0\u03c4\u03c9\u03c3\u03b7 \u03a4\u03c1\u03cc\u03c0\u03bf\u03c5 \u03c0\u03bb\u03b7\u03c1\u03c9\u03bc\u03ae\u03c2], CASE WHEN tmp.[\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1] <> tmp.[\u0391\u03be\u03af\u03b1] THEN tmp.[\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1] ELSE NULL END AS [\u039c\u03b5\u03c4\u03b1\u03b2\u03b5\u03b2\u03bb\u03b7\u03bc\u03ad\u03bd\u03b7\u0391\u03be\u03af\u03b1], tmp.[\u03a0\u03b5\u03c1\u03b9\u03ad\u03c7\u03b5\u03b9 \u03a3\u03c5\u03bd\u03b4\u03c1\u03bf\u03bc\u03b7\u03c4\u03b9\u03ba\u03ae \u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae], tmp.[\u03a0\u03b5\u03c1\u03b9\u03ad\u03c7\u03b5\u03b9 \u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u03a0\u03c1\u03bf\u03c2 \u0391\u03bd\u03b1\u03bd\u03ad\u03c9\u03c3\u03b7], tmp.[\u03a0\u03c9\u03bb\u03b7\u03c4\u03ae\u03c2], tmp.[\u0397\u03bc. \u03a5\u03c0\u03bf\u03b3\u03c1\u03b1\u03c6\u03ae\u03c2], tmp.[\u0397\u03bc. \u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1\u03c2], tmp.[State ( \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5 )] FROM ITApps.[dbo].[vwContractsPerCampaign] tmp ORDER BY tmp.[\u0397\u03bc. \u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1\u03c2] DESC]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "refusal_reason": null}
{"timestamp": "2025-12-31T18:28:01.880635", "question": "Show contracts this month", "status": "ok", "confidence": 0.95, "sql_statement": "SELECT TOP(100) tgi.ID, [BusinessPointID], [CampaignID], [SourceCampaignID], [CaseID], [CustomerName], [Brandname], [Prefecture], [Municipality], [City], [StreetName], [StreetNumber], [NumberExtension], [ZipCode], [Phone], [CustomerProfession], [ReliabilityStatus], [MainHeadingID], [MainHeadingCode], [MainHeadingName], tgiv.LastSignedDate FROM dbo.[TargetGroupItem] tgi WITH (nolock) JOIN dbo.[TargetGroupItemValue] tgiv WITH (nolock) ON tgi.ID = tgiv.TargetGroupItemID LEFT JOIN dbo.[TargetGroupItemInfo] tgii WITH (nolock) ON tgiv.ID = tgii.TargetGroupItemValueID WHERE tgiv.LastSignedDate >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) ORDER BY tgiv.LastSignedDate DESC", "row_count": 0, "execution_time_ms": 2737.149, "total_time_ms": 11231.227, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T18:52:05.082012", "question": "Show contracts this month", "status": "refuse", "confidence": 0.0, "sql_statement": "", "row_count": 0, "execution_time_ms": 0, "total_time_ms": 0, "error": null, "refusal_reason": "Low confidence (0%) or validation errors"}
{"timestamp": "2025-12-31T18:57:12.687306", "question": "Show contracts this month", "status": "ok", "confidence": 0.95, "sql_statement": "SELECT TOP(100) bp.Code AS [\u039a\u03c9\u03b4. \u03a0\u03b5\u03bb\u03ac\u03c4\u03b7], bp.Name AS [\u0395\u03c0\u03c9\u03bd\u03c5\u03bc\u03af\u03b1], ctr.ID AS [\u039a\u03c9\u03b4. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5], cmp.Name AS [\u039a\u03b1\u03bc\u03c0\u03ac\u03bd\u03b9\u03b1], ctr.SignedDate AS [\u0397\u03bc. \u03a5\u03c0\u03bf\u03b3\u03c1\u03b1\u03c6\u03ae\u03c2], ctr.CreatedOn AS [\u0397\u03bc. \u0394\u03b7\u03bc. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5] FROM dbo.Contract ctr JOIN dbo.TargetGroupItemValue tgiv ON ctr.ID = tgiv.ContractID JOIN dbo.TargetGroupItem tgi ON tgiv.TargetGroupItemID = tgi.ID JOIN dbo.Campaign cmp ON tgi.CampaignID = cmp.ID JOIN dbo.BusinessPoint bp ON tgi.BusinessPointID = bp.ID WHERE ctr.State = 1 AND (ctr.type in (0,2,4)) AND ctr.CreatedOn >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) ORDER BY cmp.Name, ctr.CreatedOn", "row_count": 100, "execution_time_ms": 2690.74, "total_time_ms": 12414.017, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T18:57:56.645463", "question": "top 5 customers by revenue", "status": "ok", "confidence": 0.5599999999999999, "sql_statement": "SELECT TOP(5) bp.Name AS CustomerName, SUM(cp.Price) AS TotalRevenue FROM dbo.ContractProduct cp INNER JOIN dbo.BusinessPoint bp ON cp.BusinessPointID = bp.ID GROUP BY bp.Name ORDER BY TotalRevenue DESC", "row_count": 5, "execution_time_ms": 4241.473, "total_time_ms": 15414.173, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T19:02:18.553973", "question": "Show contracts this month", "status": "ok", "confidence": 0.95, "sql_statement": "SELECT TOP(100) bp.Code AS [\u039a\u03c9\u03b4. \u03a0\u03b5\u03bb\u03ac\u03c4\u03b7], bp.Name AS [\u0395\u03c0\u03c9\u03bd\u03c5\u03bc\u03af\u03b1], ctr.ID AS [\u039a\u03c9\u03b4. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5], cmp.Name AS [\u039a\u03b1\u03bc\u03c0\u03ac\u03bd\u03b9\u03b1], ctr.SignedDate AS [\u0397\u03bc. \u03a5\u03c0\u03bf\u03b3\u03c1\u03b1\u03c6\u03ae\u03c2], ctr.CreatedOn AS [\u0397\u03bc. \u0394\u03b7\u03bc. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5] FROM dbo.Contract ctr JOIN dbo.TargetGroupItemValue tgiv ON ctr.ID = tgiv.ContractID JOIN dbo.TargetGroupItem tgi ON tgiv.TargetGroupItemID = tgi.ID JOIN dbo.Campaign cmp ON tgi.CampaignID = cmp.ID JOIN dbo.BusinessPoint bp ON tgi.BusinessPointID = bp.ID WHERE ctr.State = 1 AND (ctr.type in (0,2,4)) AND ctr.CreatedOn >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) ORDER BY cmp.Name, ctr.CreatedOn", "row_count": 100, "execution_time_ms": 401.78799999999995, "total_time_ms": 8962.896999999999, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T19:03:58.439416", "question": "Show top 5 customers by revenue this year", "status": "ok", "confidence": 0.6560000000000001, "sql_statement": "SELECT TOP(5) bp.Name AS CustomerName, SUM(cp.Price) AS TotalRevenue FROM dbo.ContractProduct cp INNER JOIN dbo.BusinessPoint bp ON cp.BusinessPointID = bp.ID WHERE YEAR(cp.CreatedOn) = 2024 GROUP BY bp.Name ORDER BY TotalRevenue DESC", "row_count": 5, "execution_time_ms": 785.22, "total_time_ms": 12418.523000000001, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T19:05:51.707827", "question": "Show total revenue by year for last 5 years", "status": "ok", "confidence": 0.95, "sql_statement": "WITH yearlist AS ( SELECT 2018 AS year UNION ALL SELECT yl.year + 1 AS year FROM yearlist AS yl WHERE yl.year + 1 <= YEAR(GETDATE()) ) SELECT TOP(100) [year] FROM yearlist WHERE [year] >= YEAR(GETDATE()) - 4 ORDER BY [year] DESC", "row_count": 5, "execution_time_ms": 97.113, "total_time_ms": 8050.411, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T19:08:52.468176", "question": "Show contracts this month", "status": "ok", "confidence": 0.95, "sql_statement": "SELECT TOP(100) bp.Code AS [\u039a\u03c9\u03b4. \u03a0\u03b5\u03bb\u03ac\u03c4\u03b7], bp.Name AS [\u0395\u03c0\u03c9\u03bd\u03c5\u03bc\u03af\u03b1], ctr.ID AS [\u039a\u03c9\u03b4. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5], cmp.Name AS [\u039a\u03b1\u03bc\u03c0\u03ac\u03bd\u03b9\u03b1], ctr.SignedDate AS [\u0397\u03bc. \u03a5\u03c0\u03bf\u03b3\u03c1\u03b1\u03c6\u03ae\u03c2], ctr.CreatedOn AS [\u0397\u03bc. \u0394\u03b7\u03bc. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5] FROM dbo.Contract ctr JOIN dbo.TargetGroupItemValue tgiv ON ctr.ID = tgiv.ContractID JOIN dbo.TargetGroupItem tgi ON tgiv.TargetGroupItemID = tgi.ID JOIN dbo.Campaign cmp ON tgi.CampaignID = cmp.ID JOIN dbo.BusinessPoint bp ON tgi.BusinessPointID = bp.ID WHERE ctr.State = 1 AND (ctr.type in (0,2,4)) AND ctr.CreatedOn >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) ORDER BY cmp.Name, ctr.CreatedOn", "row_count": 100, "execution_time_ms": 465.281, "total_time_ms": 12979.982, "error": null, "refusal_reason": null}
{"timestamp": "2025-12-31T20:03:49.546489", "question": "Show total revenue by year for last 5 years", "status": "ok", "confidence": 0.95, "sql_statement": "WITH yearlist AS ( SELECT 2018 AS year UNION ALL SELECT yl.year + 1 AS year FROM yearlist AS yl WHERE yl.year + 1 <= YEAR(GETDATE()) ) SELECT TOP(100) [year] FROM yearlist WHERE [year] >= YEAR(GETDATE()) - 4 ORDER BY [year] DESC", "row_count": 5, "execution_time_ms": 83.15899999999999, "total_time_ms": 7848.615, "error": null, "refusal_reason": null}
{"timestamp": "2026-01-01T08:30:43.072661", "question": "Show total revenue by year for last 5 years", "status": "ok", "confidence": 0.95, "sql_statement": "WITH yearlist AS ( SELECT 2018 AS year UNION ALL SELECT yl.year + 1 AS year FROM yearlist AS yl WHERE yl.year + 1 <= YEAR(GETDATE()) ) SELECT TOP(100) [year] FROM yearlist WHERE [year] >= YEAR(GETDATE()) - 4 ORDER BY [year] DESC", "row_count": 5, "execution_time_ms": 237.876, "total_time_ms": 7703.168, "error": null, "refusal_reason": null}
{"timestamp": "2026-01-01T08:38:39.694590", "question": "Show total revenue by year for last 5 years", "status": "ok", "confidence": 0.6200000000000001, "sql_statement": "SELECT TOP(100) YEAR(cp.CreatedOn) AS Year, SUM(cp.Price) AS TotalRevenue FROM dbo.ContractProduct cp WHERE YEAR(cp.CreatedOn) >= YEAR(GETDATE()) - 4 GROUP BY YEAR(cp.CreatedOn) ORDER BY Year DESC", "row_count": 4, "execution_time_ms": 675.663, "total_time_ms": 10857.675000000001, "error": null, "refusal_reason": null}
{"timestamp": "2026-01-01T08:39:12.891683", "question": "Show contracts this month", "status": "ok", "confidence": 0.95, "sql_statement": "SELECT TOP(100) bp.Code AS [\u039a\u03c9\u03b4. \u03a0\u03b5\u03bb\u03ac\u03c4\u03b7], bp.Name AS [\u0395\u03c0\u03c9\u03bd\u03c5\u03bc\u03af\u03b1], ctr.ID AS [\u039a\u03c9\u03b4. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5], cmp.Name AS [\u039a\u03b1\u03bc\u03c0\u03ac\u03bd\u03b9\u03b1], ctr.SignedDate AS [\u0397\u03bc. \u03a5\u03c0\u03bf\u03b3\u03c1\u03b1\u03c6\u03ae\u03c2], ctr.CreatedOn AS [\u0397\u03bc. \u0394\u03b7\u03bc. \u03a3\u03c5\u03bc\u03b2\u03bf\u03bb\u03b1\u03af\u03bf\u03c5] FROM dbo.Contract ctr JOIN dbo.TargetGroupItemValue tgiv ON ctr.ID = tgiv.ContractID JOIN dbo.TargetGroupItem tgi ON tgiv.TargetGroupItemID = tgi.ID JOIN dbo.Campaign cmp ON tgi.CampaignID = cmp.ID JOIN dbo.BusinessPoint bp ON tgi.BusinessPointID = bp.ID WHERE ctr.DMKey IS NULL AND ctr.State = 1 AND (ctr.type in (0,2,4)) AND ctr.CreatedOn >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) AND ctr.CreatedOn < DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + 1, 0) ORDER BY cmp.Name, ctr.CreatedOn", "row_count": 0, "execution_time_ms": 844.3739999999999, "total_time_ms": 8831.641, "error": null, "refusal_reason": null}
{"timestamp": "2026-01-01T08:39:30.918525", "question": "Show total revenue by year for last 5 years", "status": "ok", "confidence": 0.6200000000000001, "sql_statement": "SELECT TOP(100) YEAR(cp.CreatedOn) AS Year, SUM(cp.Price) AS TotalRevenue FROM dbo.ContractProduct cp WHERE YEAR(cp.CreatedOn) >= YEAR(GETDATE()) - 4 GROUP BY YEAR(cp.CreatedOn) ORDER BY Year DESC", "row_count": 4, "execution_time_ms": 304.65500000000003, "total_time_ms": 11330.738, "error": null, "refusal_reason": null}
{"timestamp": "2026-01-01T08:39:42.366196", "question": "top 5 customers by revenue", "status": "ok", "confidence": 0.5599999999999999, "sql_statement": "SELECT TOP(5) bp.Name AS CustomerName, SUM(cp.Price) AS TotalRevenue FROM dbo.ContractProduct cp INNER JOIN dbo.BusinessPoint bp ON cp.BusinessPointID = bp.ID GROUP BY bp.Name ORDER BY TotalRevenue DESC", "row_count": 5, "execution_time_ms": 3776.313, "total_time_ms": 13519.15, "error": null, "refusal_reason": null}
{"timestamp": "2026-01-01T08:43:50.962244", "question": "How many active customers (BusinessPoints) are there?", "status": "error", "confidence": 0.8613636363636363, "sql_statement": "WITH gen AS ( SELECT DISTINCT ( SELECT TOP 1 cv.Name + ' ' + cv.Code AS code FROM TargetGroupItemValue AS tgiv INNER JOIN TargetGroupItem AS tgi ON tgiv.TargetGroupItemID = tgi.ID INNER JOIN Campaign AS cv ON cv.ID = tgi.CampaignID WHERE ( fcv.C_ID = tgiv.ContractID ) ) AS Campaign, bp.Code AS BranchCode, bp.BrandName AS Customer, fcv.C_Signdate AS SignDate, c.CreatedOn AS CreatedOn, c.OrigionalContractID AS OrigionalContractID, fcv.Adv_ProductCode AS AdvertisementProductCode, fcv.Adv_ProductName AS AdvertisementProductName, CASE WHEN CHARINDEX('.', SUBSTRING(Hvgi.Description, 1, CHARINDEX('-', Hvgi.Description))) <> 0 THEN HvgiC.Description ELSE Hvgi.[Description] END AS Heading, adv.AdvBeginDate AS AdvertisementBeginDate, adv.AdvEndDate AS AdvertisementEndDate, cpBP.Code AS cpBPcode FROM FullContractView AS fcv INNER JOIN ContractProduct AS cp ON cp.ID = fcv.CP_ID LEFT OUTER JOIN BusinessPoint AS cpBP ON cp.BusinessPointID = cpBP.ID INNER JOIN Advertisement AS adv ON fcv.Adv_ID = adv.ID INNER JOIN VersionSection AS vs ON adv.VersionSectionID = vs.ID INNER JOIN MediumVersion AS mva ON vs.MediumVersionID = mva.ID INNER JOIN Medium AS ma ON mva.MediumID = ma.ID INNER JOIN Contract AS c ON fcv.C_ID = c.ID INNER JOIN BusinessPoint AS bp ON bp.ID = c.ActualBPOwnerID LEFT OUTER JOIN VersionGroupItem AS Hvgi LEFT OUTER JOIN VersionGroupItem AS HvgiC ON Hvgi.ParentID = HvgiC.ID INNER JOIN MediumVersion AS mv ON Hvgi.MediumVersionID = mv.ID INNER JOIN Medium AS m ON mv.MediumID = m.ID ON Hvgi.ID = fcv.Adv_HeadingID WHERE ( c.Type IN (0, 2, 3, 4) ) AND ( fcv.Adv_ProductIsComposite = 0 ) AND ( mva.Code = '21' ) AND ( ma.Code = '10' ) ) SELECT TOP(100) COUNT(DISTINCT [BranchCode]) AS ActiveCustomerCount FROM gen AS gen_1", "row_count": 0, "execution_time_ms": 60000, "total_time_ms": 102896.43100000001, "error": "Query timed out after 60 seconds", "refusal_reason": null}
