# Enhanced Semantic Database RAG System - Environment Configuration
# Copy this file to .env and fill in your actual values

# =================================================================
# AZURE OPENAI CONFIGURATION (Required)
# =================================================================
AZURE_OPENAI_API_KEY=your_azure_openai_api_key_here
AZURE_ENDPOINT=https://gyp-weu-02-res01-prdenv-cog01.openai.azure.com/
DEPLOYMENT_NAME=gpt-4.1-mini
MODEL_VERSION=2024-12-01-preview

# =================================================================
# DATABASE CONFIGURATION (Required)
# =================================================================
# SQL Server connection string
# Example for SQL Server with Windows Authentication:
# DATABASE_CONNECTION_STRING=Driver={ODBC Driver 17 for SQL Server};Server=localhost;Database=YourDatabase;Trusted_Connection=yes;

# Example for SQL Server with SQL Authentication:
# DATABASE_CONNECTION_STRING=Driver={ODBC Driver 17 for SQL Server};Server=localhost;Database=YourDatabase;UID=username;PWD=password;

DATABASE_CONNECTION_STRING=your_database_connection_string_here

# Alternative: Individual database connection components
DB_SERVER=localhost
DB_DATABASE=YourDatabase
DB_USERNAME=your_username
DB_PASSWORD=your_password

# =================================================================
# DISCOVERY CONFIGURATION (Optional - defaults provided)
# =================================================================

# Discovery limits and performance
MAX_DISCOVERY_OBJECTS=50
MAX_PARALLEL_WORKERS=8
QUERY_TIMEOUT_SECONDS=30

# Cache settings (hours)
DISCOVERY_CACHE_HOURS=24
SEMANTIC_CACHE_HOURS=48

# Database connection timeouts (seconds)
CONNECTION_TIMEOUT=15
COMMAND_TIMEOUT=10

# Query processing limits
MAX_RESULTS=100
MAX_BATCH_SIZE=5
RATE_LIMIT_DELAY=0.5

# Advanced discovery options
USE_FAST_QUERIES=true
EXCLUDE_BACKUP_TABLES=true

# =================================================================
# SYSTEM CONFIGURATION (Optional)
# =================================================================

# Logging configuration
LOG_LEVEL=INFO
LOG_FILE=data/logs/semantic_rag.log
USE_COLORED_LOGS=true

# Semantic analysis settings
CLASSIFICATION_CONFIDENCE_THRESHOLD=0.5
RELATIONSHIP_CONFIDENCE_THRESHOLD=0.6
MAX_RELATIONSHIPS=100

# Query generation settings
SQL_TIMEOUT_SECONDS=30
USE_QUERY_OPTIMIZATION=true
ENABLE_VIEW_PREFERENCE=true

# System behavior
EXCLUDE_SYSTEM_TABLES=true

# =================================================================
# EXAMPLE CONFIGURATIONS FOR COMMON SCENARIOS
# =================================================================

# Local SQL Server Express:
# DATABASE_CONNECTION_STRING=Driver={ODBC Driver 17 for SQL Server};Server=localhost\SQLEXPRESS;Database=YourDB;Trusted_Connection=yes;

# Azure SQL Database:
# DATABASE_CONNECTION_STRING=Driver={ODBC Driver 17 for SQL Server};Server=yourserver.database.windows.net;Database=YourDB;UID=username;PWD=password;Encrypt=yes;TrustServerCertificate=no;Connection Timeout=30;

# SQL Server with custom port:
# DATABASE_CONNECTION_STRING=Driver={ODBC Driver 17 for SQL Server};Server=localhost,1433;Database=YourDB;UID=username;PWD=password;

# =================================================================
# PERFORMANCE TUNING NOTES
# =================================================================
# - Increase MAX_PARALLEL_WORKERS for faster discovery (but more DB load)
# - Reduce QUERY_TIMEOUT_SECONDS for faster failure recovery
# - Increase MAX_DISCOVERY_OBJECTS to analyze more database objects
# - Set USE_FAST_QUERIES=true for 2-5x speed improvement
# - Greek/Unicode text is automatically supported with proper encoding
# - Views are now fully supported and analyzed properly

# =================================================================
# TROUBLESHOOTING
# =================================================================
# If you get "Config object has no attribute" errors:
# 1. Make sure all required environment variables are set
# 2. Check that the .env file is in the root directory
# 3. Restart the application after changing .env values
# 4. Enable DEBUG logging to see more details: LOG_LEVEL=DEBUG